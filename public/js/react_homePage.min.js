"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var c=e,r=t,s=a;l=o=i=void 0,n=!1,null===c&&(c=Function.prototype);var l=Object.getOwnPropertyDescriptor(c,r);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(s)}var o=Object.getPrototypeOf(c);if(null===o)return void 0;e=o,t=r,a=s,n=!0}},Warp=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.setSelected=this.setSelected.bind(this),this.state={status:"0"}}return _inherits(t,e),_createClass(t,[{key:"setSelected",value:function(e){this.setState({status:e})}},{key:"render",value:function(){return React.createElement("div",{className:"wrap"},React.createElement(Layout,{setSelected:this.setSelected}),React.createElement(SearchCeng,{setSelected:this.setSelected,status:this.state.status}))}}]),t}(React.Component),Layout=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"Layout"},React.createElement(Header,{setSelected:this.props.setSelected}),React.createElement(Main,null),React.createElement(Footer,null),React.createElement(Background0,null),React.createElement(Background,null),React.createElement(Top,null))}}]),t}(React.Component),Header=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this);var a=[{id:1,img:"images/htad1.jpg",href:"search?sort_id=009002001"},{id:2,img:"images/htad2.jpg",href:"search?num=50&lastest=1"},{id:3,img:"images/htad3.jpg",href:"about_us"},{id:4,img:"https://img.alicdn.com/imgextra/i1/931691262/TB2NZODrxhmpuFjSZFyXXcLdFXa-931691262.jpg",href:"news_view?news_id=1"}];this.state={items:a,count:0}}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function(e){this.props.setSelected("1")}},{key:"componentDidMount",value:function(){$.ajax({url:"/check_message_number",dataType:"json",type:"POST",success:function(e){this.setState({count:e.count})}.bind(this),error:function(e,t,a){}.bind(this)})}},{key:"render",value:function(){var e=React.createElement("span",{className:"headernewsnum"},this.state.count),t={display:"none"};return 0==this.state.count&&(e=React.createElement("span",{style:t})),React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("div",{className:"search"},React.createElement("span",{className:"headersearch",onClick:this.handleClick},"搜索"),React.createElement("span",{className:"searchfangda"},React.createElement("img",{src:"images/fangdajing.png",alt:"",className:"searchfangdaImg"})),React.createElement("div",{className:"headernews"},React.createElement("a",{href:"messages"},React.createElement("img",{src:"images/new2.png",alt:"",className:"headernimg"}),e)))),React.createElement(Lunbo,{items:this.state.items}))}}]),t}(React.Component),Main=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"main"},React.createElement(HomeNav,null),React.createElement(News,null),React.createElement(Activity,null),React.createElement(Like,null))}}]),t}(React.Component),HomeNav=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={navitems:[]}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=[{img:"http://static.buy42.com/ht_sy_xp.jpg",name:"每日新品",href:"search?lastest=1"},{img:"http://static.buy42.com/ht_sy_qz.jpg",name:"裙装",href:"search?sort_id=001001"},{img:"http://static.buy42.com/ht_sy_my.jpg",name:"母婴童装",href:"search?sort_id=007"},{img:"http://static.buy42.com/ht_sy_sp.jpg",name:"饰品",href:"search?sort_id=004002"},{img:"http://static.buy42.com/ht_sy_cj.jpg",name:"厨房用品",href:"search?sort_id=009002001"},{img:"http://static.buy42.com/ht_sy_jj.jpg",name:"家具家纺",href:"search?sort_id=009"},{img:"http://static.buy42.com/ht_sy_jz.jpg",name:"残障伙伴兼职",href:"part_job"},{img:"http://static.buy42.com/ht_sy_gy.jpg",name:"关于善淘",href:"about_us"}];this.setState({navitems:e})}},{key:"render",value:function(){return React.createElement("ul",{className:"navUl"},this.state.navitems.map(function(e){return React.createElement(HomeNavli,{item:e})}))}}]),t}(React.Component),HomeNavli=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("li",{className:"homeNavli"},React.createElement("a",{href:this.props.item.href},React.createElement("img",{src:this.props.item.img,alt:""}),React.createElement("p",null,this.props.item.name)))}}]),t}(React.Component),News=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.scroll=this.scroll.bind(this),this.state={headlineitems:[]}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){$.ajax({url:"/published_headlines",dataType:"json",type:"GET",success:function(e){this.setState({headlineitems:e.rows}),e.rows.length>1&&setInterval(this.scroll,2800)}.bind(this),error:function(e,t,a){}.bind(this)})}},{key:"scroll",value:function(){var e=$(".HomeNews li").first().css("margin-top"),t=parseInt(e);if(-20>t){var a=$(".HomeNews li").first();a.detach().css("margin-top","").appendTo($(".HomeNews"))}$(".HomeNews li").first().animate({"margin-top":"-25px"},450)}},{key:"render",value:function(){return React.createElement("div",{className:"news"},React.createElement("p",{className:"yourLike"},React.createElement("span",null,"头条新闻")),React.createElement("ul",{className:"HomeNews"},this.state.headlineitems.map(function(e){return React.createElement(NewsLi,{item:e})})),React.createElement("span",{className:"newsMore"},React.createElement("a",{href:"news"})))}}]),t}(React.Component),NewsLi=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this)}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function(e){location.href="news_view?news_id="+this.props.item.id}},{key:"render",value:function(){return React.createElement("li",{className:"newsLi"},React.createElement("u",{onClick:this.handleClick},this.props.item.title))}}]),t}(React.Component),Activity=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={activityitems:[]}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=[{acname:"善淘网实体店2017-03-25开业",img:"https://img.alicdn.com/imgextra/i4/931691262/TB2_8.7ldhvOuFjSZFBXXcZgFXa-931691262.jpg"},{acname:"现在充会员享特权啦",img:"https://img.alicdn.com/imgextra/i1/931691262/TB2xDhkoSFjpuFjSspbXXXagVXa-931691262.jpg"}];this.setState({activityitems:e})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("p",{className:"yourLike"},React.createElement("span",null,"最新活动")),React.createElement("ul",{className:"activity_ul"},this.state.activityitems.map(function(e){return React.createElement(Activity_li,{item:e})})))}}]),t}(React.Component),Activity_li=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("li",{className:"activity_li"},React.createElement("a",{href:"news"},React.createElement("img",{src:this.props.item.img,alt:""}),React.createElement("p",null,this.props.item.acname)))}}]),t}(React.Component),Like=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={likeitems:[]}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){$.ajax({url:"/find_lastest_products",dataType:"json",data:{num:8,lastest:1},type:"GET",success:function(e){this.setState({likeitems:e.rows})}.bind(this),error:function(e,t,a){}.bind(this)})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("p",{className:"yourLike"},React.createElement("span",null,"猜你喜欢")),React.createElement("ul",{className:"homeLike"},this.state.likeitems.map(function(e){return React.createElement(LikeLi,{item:e})})))}}]),t}(React.Component),LikeLi=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e="product_show?product_id="+this.props.item.id,t="images/no_picture.png";return this.props.item.img&&(t=this.props.item.img.location),React.createElement("li",{className:"homeLikeLi"},React.createElement("a",{href:e},React.createElement("img",{src:t,alt:""}),React.createElement("p",{className:"likename"},this.props.item.product_name),React.createElement("p",{className:"likeprice"},"￥",React.createElement("span",null,this.props.item.product_sale_price))))}}]),t}(React.Component),Footer=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("ul",{className:"footernav"},React.createElement("li",null,React.createElement("a",{href:"/"},React.createElement("p",null,React.createElement("img",{src:"images/shouye2.png",alt:""})),React.createElement("p",null,"首页"))),React.createElement("li",null,React.createElement("a",{href:"/sort"},React.createElement("p",null,React.createElement("img",{src:"images/fenlei4.png",alt:""})),React.createElement("p",null,"分类"))),React.createElement("li",null,React.createElement("a",{href:"news"},React.createElement("p",{className:"footerCenter"},React.createElement("img",{src:"images/event.png",alt:""})))),React.createElement("li",null,React.createElement("a",{href:"/cart_infos"},React.createElement("p",null,React.createElement("img",{src:"images/gouwuche2.png",alt:""})),React.createElement("p",null,"购物车"))),React.createElement("li",null,React.createElement("a",{href:"/person_center"},React.createElement("p",null,React.createElement("img",{src:"images/wode.png",alt:""})),React.createElement("p",null,"我的"))))}}]),t}(React.Component),Background0=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"background0"},"别拉了，没有啦！")}}]),t}(React.Component),Top=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this)}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function(e){$("body,html").animate({scrollTop:0},400)}},{key:"componentDidMount",value:function(){$(window).scroll(function(){var e=$(window).scrollTop();e>500?$(".top").fadeIn(250):$(".top").fadeOut(250)})}},{key:"render",value:function(){return $(window).scrollTop(),React.createElement("div",{className:"top",onClick:this.handleClick},React.createElement("img",{src:"images/scroll-to-top-icon.png",alt:""}))}}]),t}(React.Component),Background=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"background"})}}]),t}(React.Component),SearchCeng=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.handleClick1=this.handleClick1.bind(this),this.onKeyPress=this.onKeyPress.bind(this)}return _inherits(t,e),_createClass(t,[{key:"componentDidUpdate",value:function(e,t){$(".SearchCengInput").focus()}},{key:"onKeyPress",value:function(e){var t=e.which;if(13==t){this.props.setSelected("0");var a=encodeURI(e.target.value);location.href="/search?q="+a}}},{key:"handleClick",value:function(e){this.props.setSelected("0")}},{key:"handleClick1",value:function(e){this.props.setSelected("0")}},{key:"render",value:function(){var e=React.createElement("div",null);return"1"==this.props.status&&(e=React.createElement("div",{className:"SearchCeng"},React.createElement("div",{className:"SearchCeng_top"},React.createElement("span",{className:"goBack",onClick:this.handleClick1},React.createElement("img",{src:"images/jiantou.png",alt:""})),React.createElement("input",{type:"text",name:"",placeholder:"搜索",className:"SearchCengInput",onKeyPress:this.onKeyPress}),React.createElement("span",{className:"SearchCengNo",onClick:this.handleClick},"取消")),React.createElement("p",{className:"word"},"大家都在搜"),React.createElement("div",{className:"SearchCeng_infor"},React.createElement("span",null,React.createElement("a",{href:"/search?q=礼服"},"礼服")),React.createElement("span",null,React.createElement("a",{href:"/search?q=棒球服"},"棒球服")),React.createElement("span",null,React.createElement("a",{href:"/search?q=孕妇裤"},"孕妇裤")),React.createElement("span",null,React.createElement("a",{href:"/search?q=休闲鞋"},"休闲鞋")),React.createElement("span",null,React.createElement("a",{href:"/search?q=板鞋"},"板鞋")),React.createElement("span",null,React.createElement("a",{href:"/search?q=电动车"},"电动车")),React.createElement("span",null,React.createElement("a",{href:"/search?q=手提包"},"手提包")),React.createElement("span",null,React.createElement("a",{href:"/search?q=行车记录仪"},"行车记录仪")),React.createElement("span",null,React.createElement("a",{href:"/search?q=礼品袋"},"礼品袋")),React.createElement("span",null,React.createElement("a",{href:"/search?q=移动电源"},"移动电源"))))),e}}]),t}(React.Component);ReactDOM.render(React.createElement(Warp,null),document.getElementById("example"));