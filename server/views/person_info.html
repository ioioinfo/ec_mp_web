<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>个人信息</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/jinping.css">
    <script src="{{static_host}}/jquery-3.1.1.min.js"type="text/javascript"></script>
    <script src="{{static_host}}/react.min.js"></script>
    <script src="{{static_host}}/react-dom.min.js"></script>
    <script src="{{static_host}}/browser.min.js"></script>
    <script src="js/jinzhi.js"></script>
    <style media="screen">
      @media screen and (max-width:768px){
        *{
            margin: 0;
            padding: 0;
          }
          html,body{
            margin: 0;
            padding: 0;
            width: 100%;
            position: relative;
            font-family: "PingHei","Lucida Grande", "Lucida Sans Unicode", "STHeiti", "Helvetica","Arial","Verdana","sans-serif"; */

          }
          body{
            background: #eee;
          }

          a{
            text-decoration: none;
            color: #101010;
          }
          li{
            list-style: none;

          }
          #content{
              height: 100%;
          }
          .wrap .top{
            font-size: 0;
            border-bottom: 1px solid #E7E7E7;
            background: #fff;
          }
          .wrap .top span{
            font-size: 14px;
          }
          .wrap .top span:first-child{
            display: inline-block;
            width: 12.533333%;
            height: 47px;
            line-height: 47px;
            text-align: center;
          }
          .wrap .top span:nth-child(3n+2){
            display: inline-block;
            width: 74.933333%;
            height: 47px;
            line-height: 47px;
            font-size: 14px;
            text-align: center;
          }
          .wrap .top span:last-child{
            width: 12.533333%;
            height: 47px;
            line-height: 47px;
            text-align: center;
            color: #FF4400;
          }
          .wrap .top span img{
            width: 20px;
            height: 20px;
            vertical-align: middle;
          }
          /*中间部分*/
          .middle{
            width: 100%;
            margin: 26px auto;


          }
          .middle .middle-ul{
            width: 100%;
          }
          .middle .middle-li{
            overflow: hidden;
            border-bottom: 1px solid #e7e7e7;
            background: #fff;
            padding: 0 3.2%;
          }
          .middle .middle-li p{
            width: 50%;
            float: left;
            font-weight: 400;
            font-size: 14px;
            height: 47px;
            line-height: 47px;
            color: #051b28;
          }
          .middle .middle-li .middle-p2{
            text-align: right;
          }
          .middle .middle-li .middle-p2 span{
            color: #999;
          }
          .middle .middle-li .middle-p2 img{
            width: 15px;
            height: 15px;
            vertical-align: middle;
          }
          .middle .middle-li .middle-p2 input{
            outline-style: none;
            border: none;
            color: #999;
            background: #fff;
          }
          .middle .middle-li:last-child{
            margin-top: 26px

          }
          .footer{
            width: 100%;
            height: 56px;
            text-align: center;
            line-height: 56px;
            font-size: 16px;
            font-weight: 400;
            background: #D81E06;
            color: #fff;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
          }

          /*头像*/
          .middle .middle-ul li:first-child{
            height: 76px;
            line-height: 76px;
          }
          .middle .middle-ul li .p{
            height: 76px;
            line-height: 76px;
          }
          .middle .middle-ul li .p .header{
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            border-radius:33px;
            vertical-align: middle;
          }
          .middle .middle-ul li .p .header img{
            width: 66px;
            height: 66px;
            border-radius: 33px;

            vertical-align:top;
          }
          /*修改头像*/
          .header-images{
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            position:fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 9;
            display: none;
          }
          .header-images .header-images-infor{
            width: 96%;
            background: #fff;
            position: absolute;
            top: 31%;
            left: 2%;
            z-index: 99;

          }
          .header-images .header-images-infor p{
            height: 56px;
            line-height: 56px;
            text-indent: 15px;
            border-bottom: 1px solid #eee;
          }
          .header-images .header-images-infor p:first-child{

            border-bottom: 1px solid #999;
          }
          .header-images .header-images-infor p img{
            width: 20px;
            height: 20px;
            vertical-align: middle;
            margin-right: 15px;
          }

          /*昵称*/
          .nicheng-name{
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            position:fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 9;
            display: none;
          }
          .nicheng-name .nicheng-name-infor{
            width: 96%;
            height: 185px;
            background: #fff;
            position: absolute;
            top: 31%;
            left: 2%;
            z-index: 99;
          }
          input::-webkit-input-placeholder {
            color:    #DD2727;
            font-weight: bold;
          }
          input:-moz-placeholder {
              color:    #DD2727;
              font-weight: bold;
          }
          textarea::-webkit-input-placeholder {
            color:    #DD2727;
            font-weight: bold;
          }
          textarea:-moz-placeholder {
              color:    #DD2727;
              font-weight: bold;
          }
          .nicheng-name .nicheng-name-infor input{
            width: 100%;
            height: 25px;
            line-height: 25px;
            outline-style: none;
            border: none;
            font-size: 16px;

          }
          .nicheng-name .nicheng-name-infor .nicheng-name-p{
            margin: 25px auto;
            width: 90%;
            border-bottom: 1px solid #DD2727;
          }
          .nicheng-name .nicheng-name-infor .nicheng-2{
            font-size: 12px;
            margin: 8px auto;
            width: 90%;
          }
          .nicheng-name .nicheng-name-infor .nicheng-3{
            font-size: 16px;
            height: 40px;
            line-height: 40px;
            margin: 8px auto;
            width: 90%;
            color: #fff;
            text-align: center;
            margin: 15px auto;
            background: #DD2727;
            border-radius: 4px;
          }
          /*性别*/
          .xingbie{
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            position:fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 9;
            display: none;
          }
          .xingbie .xingbie-infor{
            width: 96%;
            height: 138px;
            background: #fff;
            position: absolute;
            top: 31%;
            left: 2%;
            z-index: 99;
          }
          .xingbie .xingbie-infor p:first-child{

            border-bottom: 1px solid #999;
          }
          .xingbie .xingbie-infor p{
            height: 45px;
            line-height: 45px;
            text-indent: 15px;
            border-bottom: 1px solid #eee;
          }
		  .xingbie .xingbie-infor p input{
			  border: none;
			  outline: none;
		  }


      }
    </style>
  </head>
  <body>

    <div id="content">
        <div class="wrap">
            <div class="top">
              <span><a href="/configure"><img src="images/jiantou.png" alt=""></a></span>
              <span>个人信息</span>
              <span class="save"></span>
            </div>
          <div class="middle">
            <ul class="middle-ul">
              <li class="middle-li"><p class="middle-p1 p">头像</p><p class="middle-p2 p"><span class="header">{% if persons[0] %}<img src="images/{{persons[0].avatar_url}}" alt="">{% endif %}</span><img src="images/rightjiantou.png" alt=""></p></li>
              <li class="middle-li"><p class="middle-p1">用户名</p><p class="middle-p2"><span>{{person.username}}</span></p></li>
              <li class="middle-li"><p class="middle-p1 p2">昵称</p><p class="middle-p2 p2"><span class="nick_name">{% if persons[0] %}{{persons[0].nickname}}{% endif %}</span><img src="images/rightjiantou.png" alt=""></p></li>
              <li class="middle-li"><p class="middle-p1 p3">性别</p><p class="middle-p2 p3 p4"><span>{{person_info.gender}}</span><img src="images/rightjiantou.png" alt=""></p></li>
              <li class="middle-li"><p class="middle-p1">出生日期</p><p class="middle-p2"><span><input  type="date"  name=""  value="{{person_info.birthday}}" placeholder="点击选择日期" class="date"></li>
            </ul>
          </div>
        </div>
        <div class="footer">
          退出当前帐号
        </div>

        <!-- 上传头像 -->
        <div class="header-images">
          <div class="header-images-infor">
            <p>修改头像</p>
            <p class="xiangce"><img src="images/i-15.png" alt=""><span>相册</span></p>
            <p><img src="images/i-16.png" alt=""><span>拍照</span></p>
          </div>
        </div>

        <!-- 昵称 -->
        <div class="nicheng-name">
          <div class="nicheng-name-infor">
            <p class="nicheng-name-p"><input type="text" name="" {% if persons[0] %}value="{{persons[0].nickname || ''}}"{% endif %} placeholder="输入昵称" class="nickname"></p>
            <p class="nicheng-2">1.仅供场景使用</p>
            <p class="nicheng-2">2.最终解释权归平台所有</p>
            <p class="nicheng-3">保存</p>
          </div>

        </div>

        <!-- 性别 -->
        <div class="xingbie">
          <div class="xingbie-infor">
            <p>修改性别</p>
            <p class="man"><span data-id="男">男</span>
            <p class="woman"><span data-id="女">女</span>
          </div>
        </div>
    </div>

    <script type="text/javascript">
      $(function(){
        $(".middle-li .p").click(function(){
          $(".header-images").css("display","block");
        });
        $(".header-images").click(function(){
          $(this).css("display","none");
        });
        $(".header-images-infor").click(function(event){
          event.stopPropagation();
        });
		$(".footer").click(function(){
			location.href = "/chat_login";
		});
      })
    </script>


    <script type="text/javascript">
	//昵称
      $(function(){
        $(".middle-li .p2").click(function(){
          $(".nicheng-name").css("display","block");
        });
        $(".nicheng-name").click(function(){
          $(this).css("display","none");
        });
        $(".nicheng-name-infor").click(function(event){
          event.stopPropagation();
        });
		$(".nicheng-3").click(function(){
			$(".nicheng-name").css("display","none");
			var nickname = $(".nickname").val()
			if (!nickname) {
				return;
			}
				$(".nick_name").html($(".nickname").val());
			$.post("/save_nickname",{nickname:nickname},function(data){
				if (!data.success) {
					alert(data.message);
				}
			})
		});
      })
    </script>


    <script type="text/javascript">
	//性别,生日
      $(function(){
		 var gender = "";
		 var birth_day = "";
        $(".middle-li .p3").click(function(){
          $(".xingbie").css("display","block");
        });
        $(".xingbie").click(function(){
          $(this).css("display","none");
        });
        $(".xingbie-infor").click(function(event){
          event.stopPropagation();
        });
		$(".man").click(function(){
			$(".xingbie").css("display","none");
			gender = $(".man span").data("id");
			$(".middle-li .p3.p4 span").html(gender);
			save_gender(gender);
		});
		$(".woman").click(function(){
			$(".xingbie").css("display","none");
			gender = $(".woman span").data("id");
			$(".middle-li .p3.p4 span").html(gender);
			save_gender(gender);
		});
		//性别
		var save_gender = function(gender){
			$.post("/save_gender",{gender:gender},function(data){
				if (!data.success) {
					alert(data.message);
				}
			})
		};
		//生日
		$(".date").change(function(){
			birth_day = $(this).val();
			$.post("/save_birthday",{birthday:birth_day},function(data){
				if (!data.success) {
					alert(data.message);
				}
			})
		});
      })
    </script>

    <!-- 生日 -->
    <!-- <div class="birthday">
      <div class="birthday-infor">
        <input type="date" name="" value="">
      </div>
    </div> -->
  </body>
</html>
