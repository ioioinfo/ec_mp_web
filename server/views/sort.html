<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
<script src="js/lodash.min.js" type="text/javascript"></script>
<title></title>
<style>
	@media screen and (max-width:640px){
		*{
			padding: 0;
			margin: 0;
		}
		html,body{
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
		}
		a{
			text-decoration: none;
		}
		::-webkit-scrollbar {
			display: none;
		}
		/*----  t  o   p-----*/
		.warp{
			position: relative;
			height: 100%;
			width: 100%;
		}
		.header{
			text-align: center;
			position: absolute;
			top:0;
			left: 0;
			right: 0;
			line-height: 54px;
			background: #eaeaea;
		}
		.header-img{
			width: 34px;
			height: 34px;
			vertical-align: middle;
			margin-left: 10px;
		}
		.header-search{
			width: 76%;
			font-size: 14px;
			color: #8B8B83;
			font-weight: 300;
			text-indent: 10px;
			height:35px;
			padding: 10px  5px 10px 0;
			vertical-align: middle;
			border-radius: 4px;
			margin-right: 10px;
			border: 2px solid #ebe8eb;
			outline: none;
			-webkit-appearance : none ;
		}
		/*-------m   a    i     n---------*/
		.main{
			border-top: 1px solid #919191;
			position: absolute;
			top: 55px;
			left: 0;
			right: 0;
			bottom: 0;
			margin-bottom: 34px;
		}
		.main-ul{
			position: absolute;
			top: 0;
			left: 0;
			right: 77%;
			bottom: 0;
			background: #eaeaea;
		}
		.main-ul li{
			height: 45px;
			line-height:45px;
			background: #eaeaea;
			text-indent: 8px;
			font-size: 12px;
			color: #888888;
		}
		.main-ul li.active{
			background: #fff;
		}
		.main-img{
			width: 96%;
			height: 103px;
			background: #f4f4f4;
			margin-bottom: 16px;
		}
		.main-right{
			position: absolute;
			top: 0;
			left: 25%;
			right: 0;
			bottom: 0;
			overflow: auto;
		}
		.main-img img{
			width: 100%;
			height: 103px;
		}
		.main-product{
			width: 100%
		}
		.product-title{
			width: 98%;
			height: 35px;
			border: 1px solid #8f8f8f;
			line-height: 35px;
			text-indent: 4px;
			color:#8f8f8f;
			margin: 10px 0;
		}
		.main-product-title-1{
			border-left: 3px solid #fbbc00;
		}
		.main-product-title-2{
			border-left: 3px solid red;
		}
		.main-product-title-3{
			border-left: 3px solid green;
		}
		.right-triangle{
			float: right;
			margin-right: 5px;
			color: #000;
		}
		.main-product-ul{
			width: 100%;
			list-style: none;
			margin-bottom: 5px;
			overflow: hidden;
		}
		.main-product-ul li{
			width: 33.3%;
			height: 80px;
			float: left;
			padding: 2px;
			box-sizing: border-box;
			margin: 5px 0;
		}
		.main-product-ul:last-child li{
			height: 17px;
		}
		.main-product-ul li img{
			height: 80px;
		}
		.main-product-ul li img{
			display: block;
			width: 60px;
			height: 60px;
			background: #fff;
			margin: 0 auto;
		}
		.main-product-ul li p{
			margin: 0;
			text-align: center;
			font-size: 12px;
			line-height: 20px;
			color: #919191;
		}
		/*----------f  o  o  t  e  r   ------------*/
		.footer{
			position: fixed;
			bottom: 0;
			left: 0;
			right: 0;
			background: #f4f4f4;
			border-top: 1px solid #ABABAB;
		}
		.footer-ul{
			width: 100%;
			margin: 0 auto;
			list-style: none;
			height: 60px;
			display: flex;
		}
		.footer-ul li{
			width: 25px;
			height:60px;
			padding-top: 5px;
			float: left;
			margin: 5px 0;
			flex: 1;
			text-align: center;
		}
		.footer-ul li img{
			width: 25px;
			height:25px;
		/*display: inline-block;*/
		}
		.footer-ul li span{
			display: block;
			font-size: 12px;
			line-height: 10px;
			color: #919191;
		}
	}
</style>
</head>
<body>
	<div class="warp">
		<div class="header">
			<input type="search" results="w" placeholder="搜索" class="header-search" id="header-search">
			<img  src="images/weixin.png" class="header-img">
		</div>

		<div class="main">
			<ul class="main-ul" >
				{% for sort in sorts["0"] %}
					<li {% if loop.first %}class="active"{% endif %} data-id="{{sort.id}}" id="{{sort.id}}" >{{sort.sort_name}}</li>
				{% endfor %}
			</ul>

			<div class="main-right ">

			</div>
			<div class="main-bottom"></div>
		</div>

		<div class="footer">
			<ul class="footer-ul">
				<li><a href="#"><img src="images/shouye.png" alt=""><span>首页</span></a></li>
				<li><a href="#"><img src="images/fenlei.png" alt=""><span>分类</span></a></li>
				<li><a href="#"><img src="images/gouwuc.png" alt=""><span>购物车</span></a></li>
				<li><a href="#"><img src="images/shequ.png" alt=""><span>社区</span></a></li>
				<li><a href="#"><img src="images/denglu.png" alt=""><span>我的</span></a></li>
			</ul>
		</div>
	</div>

	<script id="sort_infos" type="text/template">
		<div class="main-img ">
			<img src="images/<%- parent.img_location %>" alt="">
		</div>
		<% _.forEach(sorts[sort_id], function(level2) { %>
		<div class="main-product ">
			<div class="product-title main-product-title-1"><%- level2.sort_name %>
				<span class="right-triangle">></span>
			</div>
			<ul class="main-product-ul">
				<% _.forEach(sorts[level2.id], function(level3) { %>
				<li><a href="/search?sort_id=<%- level3.id %>"><img src="images/<%- level3.img_location %>" alt=""><p><%- level3.sort_name %></p></a></li>
				<% }); %>
			</ul>
			<% }); %>
			<ul class="main-product-ul">
				<li></li>
				<li></li>
				<li></li>
			</ul>
		</div>
	</script>
	<script>
		$(function() {
			$(".header-search").click(function(){
				location.href = "/search_area";
			});
			var sorts = {{sorts_infos|safe}};
			var click_levelone = function(sort_id){
				if (!sort_id) {
					return;
				}
				var parent = {};
				 _.forEach(sorts["0"], function(sort) {
					 if (sort.id == sort_id ) {
					 	parent = sort;
					 }
				});
				var t = _.template($("#sort_infos").html());
				$(".main-right").html(t({sorts:sorts,sort_id:sort_id,parent:parent}));
			};
			$(".main-ul li").click(function(){
				$(".main-ul li").removeClass("active");
				$(this).addClass("active");
				var sortid = $(this).data("id");
				click_levelone(sortid);
			});
			click_levelone(1);
		});
	</script>
</body>
</html>
