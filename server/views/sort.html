<!DOCTYPE html><html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <title>产品分类</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/jinping.css">
    <style>
  *{
      padding: 0;
      margin: 0;
    }
    html,body{
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      position: relative;

    }
    a{
      text-decoration: none;
      color: #999;
    }
    /*隐藏滚动条*/
    ::-webkit-scrollbar {
        display: none;
    }

/*----  t  o   p-----*/
    #content{
        height: 100%;
    }
    .warp{
      position: relative;
      height: 100%;
      width: 100%;
    }
    /*头部搜索框*/
  .header{
      width: 100%;
      /*height: 146px;*/
      overflow: hidden;
    }
    .search{
      width: 100%;
      height:36px;
      line-height: 36px;
      background: rgb(112,180,44);
      position: relative;
      overflow: hidden;
      text-align: center;
      font-size: 0;
    }

    .searchfangdaImg{
      position: absolute;
      top: 10px;
      left: 4.26829268%;
    }
    input::-webkit-input-placeholder {
      color:    #fff;
    }
    input:-moz-placeholder {
      color:    #fff;
    }
    input::-webkit-input-results {
      color:    #fff;
    }
    input:-moz-results {
      color:    #fff;
    }
    .headersearch{
      display: inline-block;
      width: 87.4666666%;
      height: 25px;
      line-height: 25px;
      outline-style: none;
      border: none;
      background: #44a338;
      border-radius: 6px;
      text-indent: 36px;
      vertical-align: middle;
      color: #fff;
      font-size: 12px;
      text-align: left;
    }
    .headernews{
      display: inline-block;
      width: 6.6666%;
      height: 25px;
      position: relative;
    }
    .headernewsnum{
      position: absolute;
      top: 8px;
      left: 14px;
      font-size: 12px;
      font-weight: 400;
      color: #EE0A08;
      background: #fff;
      width: 14px;
      height: 14px;
      line-height: 14px;
      border-radius: 7px;
      display: none;
    }
    .headernimg{
      vertical-align: middle;
      margin-left: 5px;
      width: 20px;
      height: 20px;
    }


    /*-------m   a    i     n---------*/
    .main{
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin-bottom: 56px;
      background: #F2F2F2;
    }
    .main-ul{
      position: absolute;
      top: 0;
      left: 0;
      right: 77%;
      bottom: 0;
      overflow: auto;
    }
    .main-ul li{
      height: 45px;
      line-height:45px;
      background: #fff;
      text-align: center;
      font-size: 12px;
      color: #888888;

    }
    .main-ul li span{
      display: inline-block;
      width: 85%;
      border-bottom: 1px solid #999;
    }
    .main-ul li.active{
      background: #F2F2F2;
    }


    .main-img{
      width: 96%;
      background: #f4f4f4;
      margin-bottom: 16px;
    }
    .main-right{
      position: absolute;
      top: 0;
      left: 25%;
      right: 0;
      bottom: 0;
      overflow: auto;


    }
    .main-img img{
      width: 100%;
    }

    .main-product{
      width: 100%

    }
    .product-title{
      width: 98%;
      height: 17px;
      /*border: 1px solid #8f8f8f;*/
      line-height: 17px;
      text-indent: 4px;
      color:#8f8f8f;
      margin: 10px 0;
      /*border-left: 3px solid #000;*/
	  font-size: 12px;
    }

    .right-triangle{
      float: right;
      margin-right: 2.933985%;
      color: #000;
	  width: 14px;
	  height: 14px;
    }
	.right-triangle img{
		width: 14px;
  	  height: 14px;
	}

    .main-product-ul{
      width: 100%;
      list-style: none;
      margin-bottom: 5px;
      overflow: hidden;
      display: flex;
	  flex-wrap:wrap;
	  align-content: flex-start;
      /*justify-content:space-between;*/
    }
    .main-product-ul li{
      width: 30%;
      /*background: #eee;*/
      float: left;
      padding: 2px;
      box-sizing: border-box;
      margin: 5px 0;
      background: #fff;
	  margin-right: 2.933985%;
    }
    .main-product-ul:last-child li{
      height: 17px;
	  margin-right: 0;
    }
    .main-product-ul li img{
    }
    .main-product-ul li img{
      display: block;
      width: 71.428%;
      background: #fff;
      margin: 0 auto;
    }
    .main-product-ul li p{
      margin: 0;
      text-align: center;
      font-size: 12px;
      line-height: 20px;
      color: #919191;
    }

    /*.main-bottom{
      width: 100%;
      height: 56px;
    }*/
  /*----------f  o  o  t  e  r   ------------*/
  /*底部导航*/
  .footernav{
    width: 100%;
    height: 42px;
    display: flex;
    padding-top: 5px;
    padding-bottom: 5px;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #fff;
    border-top: 1px solid #eee;
  }
  .footernav li{
    width: 20%;
    height:42px;
    box-sizing: border-box;
    list-style: none;
    text-align: center;
    font-size: 14px;
    position: relative;
  }
  .footernav li p{
 	 height: 22px;
 	 box-sizing: border-box;
  }
  .footernav li p img{
    width: 22px;
    height: 22px;
  }
  .footernav li:nth-child(5n+2) a{
 	 color: #d81e06;
    }
  /*.main-product-ul2{
	  height: 52px;
  }*/
  .footernav .footerCenter img{
    width: 55px;
    height: 55px;
    position: absolute;
    top: -12px;
    left: 13.66666%;
  }
</style>
</head>
<body>
        <div id="content">
            <div class="header">
                <div class="search">
                  <span class="headersearch">搜索</span>
                  <span class="searchfangda"><img src="images/fangdajing.png" alt="" class="searchfangdaImg" /></span>
                  <div class="headernews">
            	  <a href="/messages">
            	        <img src="images/new2.png" alt="" class="headernimg" />
            	        <span class="headernewsnum"></span>
            	  </a>
                  </div>
            	</div>
            </div>
            <div class="warp">
        		<div class="main">
                  <ul class="main-ul" >
            		{% for sort in sorts["0"] %}
                    	<li {% if loop.first %}class="active"{% endif %} data-id="{{sort.id}}" id="{{sort.id}}" >{{sort.sort_name}}</li>
                    {% endfor %}
                  </ul>

                  <div class="main-right "></div>
                  <div class="main-bottom"></div>
                </div>
            </div>
            <ul class="footernav">
                <li><a href="/"><p><img src="images/shouye3.png" alt="" /></p><p>首页</p></a></li>
                <li><a href="/sort"><p><img src="images/fenlei2.png" alt="" /></p><p>分类</p></a></li>
                <li><a href="news"><p class="footerCenter"><img src="images/event.png" alt="" /></p></a></li>
                <li><a href="/cart_infos"><p><img src="images/gouwuche2.png" alt="" /></p><p>购物车</p></a></li>
                <li><a href="/person_center"><p><img src="images/wode.png" alt="" /></p><p>我的</p></a></li>
            </ul>
            <!-- 搜索弹出层 -->
            <div class="SearchCeng">
              <div class="SearchCeng_top">
                <span class="goBack"><img src="images/jiantou.png" alt="" /></span>
                <input type="text" name="" value="" placeholder="搜索" class="SearchCengInput">
                <span class="SearchCeng_top_no">取消</span>
              </div>
              <p class="word">大家都在搜</p>
              <div class="SearchCeng_infor">
                  <span><a href="/search?q=礼服">礼服</a></span>
                  <span><a href="/search?q=棒球服">棒球服</a></span>
                  <span><a href="/search?q=孕妇裤">孕妇裤</a></span>
                  <span><a href="/search?q=休闲鞋">休闲鞋</a></span>
                  <span><a href="/search?q=板鞋">板鞋</a></span>
                  <span><a href="/search?q=电动车">电动车</a></span>
                  <span><a href="/search?q=手提包">手提包</a></span>
                  <span><a href="/search?q=行车记录仪">行车记录仪</a></span>
                  <span><a href="/search?q=礼品袋">礼品袋</a></span>
                  <span><a href="/search?q=移动电源">移动电源</a></span>
              </div>
            </div>
        </div>
    <script src="{{static_host}}/jquery-3.1.1.min.js"></script>
    <script src="js/jinzhi.js"></script>
	<script src="{{static_host}}/lodash.min.js" type="text/javascript"></script>
	<script id="sort_infos" type="text/template">
		<div class="main-img ">
          <img src="{{static_host}}/<%- parent.img_location %>" alt="">
        </div>

        <div class="main-product ">
			<% _.forEach(sorts[sort_id], function(level2) { %>
            <div class="product-title"><span class="right-name"><%- level2.sort_name %></span></div>

			<ul class="main-product-ul">
				<% _.forEach(sorts[level2.id], function(level3) { %>
	              <li>
					  <% if(level3.web_link){ %>
					  	<a href="/search?sort_ids=<%- level3.web_link %>">
					  <% }else{ %>
						<a href="/search?sort_id=<%- level3.id %>">
					  <% } %>
					  <% if(level3.img_location){ %>
						 <img src="{{static_host}}/<%- level3.img_location %>" alt="">
					 <% }else{ %>
						 <img src="{{static_host}}/no_picture.png" alt="">
					 <% } %>
					  <p><%- level3.sort_name %></p>
				      </a>
				  </li>
				<% }); %>
            </ul>

		<% }); %>
		<div style="width:100%;height:56px;text-align:center;line-height:56px;font-size:12px;color:#999;">别拉了，没有了！</div>
        </div>


	</script>
    <script>
  $(function() {
		$.ajax({
			url: "/check_message_number",
			dataType: 'json',
			type: 'POST',
			success: function(data) {
				$(".headernewsnum").show();
				$(".headernewsnum").html(data.count);
				if (data.count == 0) {
					$(".headernewsnum").hide();
				}
			},
			error: function(xhr, status, err) {
			}
		});
	  var sorts = {{sorts_infos|safe}};
	  var click_levelone = function(sort_id){
		  if (!sort_id) {
			  return;
		  }
		  var parent = {};
		   _.forEach(sorts["0"], function(sort) {
			   if (sort.id == sort_id ) {
				  parent = sort;
			   }
		  });
		  var t = _.template($("#sort_infos").html());
		  $(".main-right").html(t({sorts:sorts,sort_id:sort_id,parent:parent}));
	  };
	  $(".main-ul li").click(function(){
		  $(".main-ul li").removeClass("active");
		  $(this).addClass("active");
		  var sortid = $(this).data("id");
		  click_levelone(sortid);
	  });
	  click_levelone("001000000");

    //   搜索框弹出层
    $(".headersearch").click(function(){
        $(".SearchCeng").show();
        $(".SearchCengInput").focus();
    });
    $(".SearchCengInput").keypress(function(e){
        var key = e.which;
          if (key == 13) {
              $(".SearchCeng").hide();
              var q = encodeURI(e.target.value);
              location.href = "/search?q="+q;
          }
    });
    $(".SearchCeng_top_no").click(function(){
        $(".SearchCeng").hide();
    })
    $(".goBack").click(function(){
        $(".SearchCeng").hide();
    })


  });
  </script>

  </body>
</html>
