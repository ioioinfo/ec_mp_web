<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <title>搜索内容</title>
    <style media="screen">
      @media screen and (max-width:640px){
        *{
          padding: 0;
          margin: 0;
        }
        html,body{
          width: 100%;
          height: 100%;
        }

        li{
          list-style: none;
        }
        a{
          color: #888888;
          text-decoration: none;
          font-size: 14px;
          display: inline-block;
        }
        /*隐藏滚动条*/
        ::-webkit-scrollbar {
            display: none;
        }
        .background{
          width: 100%;
          height: 50px;
          background: #fff;
        }
        /*头部搜索框*/
      .header{
          width: 100%;
          height: 36px;
          overflow: hidden;
        }
        .search{
          width: 100%;
          height:36px;
          line-height: 36px;
          background: #F35152;
          text-align: center;
          position: relative;
          overflow: hidden;
        }

        .searchfangdaImg{
          position: absolute;
          top: 10px;
          left: 3.26829268%;
        }
        input::-webkit-input-placeholder {
          color:    #fff;
        }
        input:-moz-placeholder {
          color:    #fff;
        }
        .headersearch{
          display: inline-block;
          width: 87.4666666%;
          height: 25px;
          line-height: 25px;
          outline-style: none;
          border: none;
          background: #FF8888;
          border-radius: 6px;
          text-indent: 20px;
        }
        .headernews{
          display: inline-block;
          width: 6.6666%;
          height: 25px;
          vertical-align: middle;
          position: relative;
        }
        .headernewsnum{
          position: absolute;
          top: 3px;
          left: 14px;
          font-size: 12px;
          font-weight: 400;
          color: #EE0A08;
          background: #fff;
          width: 14px;
          height: 14px;
          line-height: 14px;
          border-radius: 7px;
        }
        .word ul{
          width: 100%;
          display: flex;
          border: 1px solid #e8e1e8;
          box-sizing: border-box;
        }
        .word .word-next li{
          flex: 1;
          text-align: center;
          height: 45px;
          line-height: 45px;
        }
        .word-next .red a{
          color: #ff5722;
        }
        .word .word-next li span img{
          width: 12px;
          height: 12px;
        }
        .infor{
          width: 96%;
          margin: 20px auto 0;
        }
        .infor .infor-ul li{
          height: 140px;
        }
        .infor-left{
          width: 27.7777778%;
          height: 100px;
          display: inline-block;
          vertical-align: top;
        }
        .infor-left img{
          width: 100%;
          height: 100px;
        }
        .infor-right{
          display: inline-block;
          width: 67.111111%;
          height: 140px;
          border-bottom: 1px solid #e8e1e8;
        }
        .infor-right .infor-right-one{
          width: 100%;
          line-height: 30px;
          font-size: 14px;
        }
        .infor-right .infor-right-two span{
          display: inline-block;
          background: #ede6ed;
          font-size: 12px;
          padding: 4px 5px;
          margin: 0 10px 0 0;
          border-radius: 6px;
        }
        .infor-right-three{
          font-size: 16px;
          color: #e51c23;
          line-height: 28px;
        }
        .infor-right-four span{
          border-radius: 4px;
          display: inline-block;
        }
        .infor-right-four span:first-child{
          padding: 0 4px;
          background: #ff7043;
          color: #fff;
          font-size: 12px;

        }
        .infor-right-four span:nth-child(3n+2){
          padding: 0 14px;
        }

        /*筛选*/
        .shaixuan{
          width: 88%;
          height: 100%;
          position: fixed;
          top: 0;
          right: 6%;
          bottom: 0;
          background:#fff;
          z-index: 2;
          display: none;
          overflow: auto;
        }
        .shaixuanline{
          width: 96%;
          margin: 0 auto;
          height:56px;
          line-height: 56px;
          border-bottom: 1px solid #E1E1E1;
        }
        .shaixuanline input::-webkit-input-placeholder {
          color:    #666;
        }
        .shaixuanline input:-moz-placeholder {
          color:    #666;
        }
        .shaixuanline input{
          width: 55px;
          text-align: center;
          outline-style: none;
        }
        .shaixuanlineInput{
          float: right;
        }
        .shaixuanlineblock{
          display: flex;
          justify-content: space-around;
          flex-wrap:wrap;


        }
        .shaixuanlineblock li{
          width: 32%;
          background: #F2F2F2;
          text-align: center;
          font-size: 14px;
          height: 30px;
          line-height: 30px;
          border-radius: 6px;
          margin-bottom: 8px;
        }
        .shaixuanline1{
          height: auto;
          padding-bottom: 17px;
        }

        .shaixuan .shaixuanlineblock li.on {
          background:#FF5004;
        }
        .shaixuan .shaixuanlineblock li.on a {
          color: #fff;
        }

        /*遮罩层*/
        .zhezhaoceng{
          width: 100%;
          height: 100%;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1;
          background: #000;
          opacity: 0.5;
          display: none;
        }
        .shaixuan .shaixuansubmit{
          width: 88%;
          display: flex;
          position: fixed;
          bottom: 0;
          left: 6%;
          right: 0;
        }
        .shaixuan .shaixuansubmit p{
          width: 50%;
          height: 46px;
          line-height: 46px;
          text-align: center;

          box-sizing: border-box;
        }
        .shaixuan .shaixuansubmit p:first-child{
          border-top: 1px solid #999;
          border-bottom: 1px solid #999;
          background: #fff;
        }
        .shaixuan .shaixuansubmit p:last-child{
          background: #FF5004;
          color: #fff;
        }
      }
    </style>
  </head>
  <body>
    <div class="search">
      <input  type="search" value="" placeholder="寻找商品" class="headersearch" />
      <span class="searchfangda"><img src="images/fangdajing.png" alt="" class="searchfangdaImg" /></span>
      <div class="headernews">
        <img src="images/new.png" alt="" class="headernimg" />
        <span class="headernewsnum">99</span>
      </div>
    </div>
    <div class="word">
      <ul class="word-next">
        <li class="red"><a href="#"><span>综合</span><span><img src="images/jiantou-down-2.png" alt=""></span></a></li>
        <li><a href="#"><span>销量优先</span></a></li>
        <li class="price"><span>价格</span><span><img src="images/jiantou-two.png" alt=""></span></li>
        <li class="word-nextshaixuan"><a href="#"><span>筛选</span><span><img src="images/jiantou-down-1.png" alt=""></span></a></li>
      </ul>
    </div>
	{% for product in products %}
		<div class="infor">
      <ul class="infor-ul">
        <li>
          <a href="/product_show?product_id={{product.id}}">
            <div class="infor-left">
              <img class="loading" src="images/load.gif" data-src="images/{{product.img.location}}" alt="">
            </div>
            <div class="infor-right">
              <p class="infor-right-one">{{product.product_name}}</p>
              <p class="infor-right-two"><span>{{product.weight}}g</span><span>{{product.color}}</span></p>
              <p class="infor-right-three">￥{{product.product_sale_price}}</p>
              <p class="infor-right-four"><span>自营</span>{% if comments[product.id] %}<span>{{comments[product.id].total_number}}条评论</span><span>好评率{{comments[product.id].good_rate_text}}</span>{% else %}<span>0条评论</span><span>好评率100%</span>{% endif %}</p>
            </div>
          </a>
        </li>
      </ul>

    </div>
	{% endfor %}
    <!-- 筛选 -->
    <div class="shaixuan">
      <div class="shaixuanline">
        <span>价格区间(元)</span><span class="shaixuanlineInput"><input type="text" name="" value="" placeholder="最低价">&nbsp;-&nbsp;<input type="text" name="" value="" placeholder="最高价"></span>
      </div>
      <div class="shaixuanline shaixuanline1">
        <span>区域</span><span class="shaixuanlineInput"><img src="images/jiantou-down-1.png" alt=""></span>
        <ul class="shaixuanlineblock shaixuanlineblock1">
          <li><a href="#">浙江沪</a></li>
          <li><a href="#">珠三角</a></li>
          <li><a href="#">北京</a></li>
          <li><a href="#">上海</a></li>
          <li><a href="#">广州</a></li>
          <li><a href="#">深圳</a></li>
        </ul>
      </div>
      <div class="shaixuanline shaixuanline1">
        <span>城市</span><span class="shaixuanlineInput"><img src="images/jiantou-down-1.png" alt=""></span>
        <ul class="shaixuanlineblock shaixuanlineblock2">
          <li><a href="#">上海</a></li>
        </ul>
      </div>
      <div class="shaixuanline shaixuanline1">
        <span>省份</span><span class="shaixuanlineInput"><img src="images/jiantou-down-1.png" alt=""></span>
        <ul class="shaixuanlineblock shaixuanlineblock3">
          <li><a href="#">浙江</a></li>
          <li><a href="#">上海</a></li>
          <li><a href="#">江苏</a></li>
          <li><a href="#">安徽</a></li>
          <li><a href="#">河南</a></li>
          <li><a href="#">河北</a></li>
          <li><a href="#">湖南</a></li>
          <li><a href="#">湖北</a></li>
          <li><a href="#">新疆</a></li>
          <li><a href="#">广东</a></li>
          <li><a href="#">广西</a></li>
          <li><a href="#">云南</a></li>
          <li><a href="#">贵州</a></li>
          <li><a href="#">内蒙古</a></li>
          <li><a href="#">山东</a></li>
          <li><a href="#">山西</a></li>
          <li><a href="#">陕西</a></li>
          <li><a href="#">辽宁</a></li>
          <li><a href="#">云南</a></li>
          <li><a href="#">贵州</a></li>
          <li><a href="#">内蒙古</a></li>
          <li><a href="#">山东</a></li>
          <li><a href="#">山西</a></li>
          <li><a href="#">陕西</a></li>
          <li><a href="#">辽宁</a></li>
        </ul>
      </div>
      <div class="shaixuansubmit">
        <p class="shaixuanNo">重置</p>
        <p class="shaixuanYes">确定</p>
      </div>
      <div class="background"></div>
    </div>
    <!-- 遮罩层 -->
    <div class="zhezhaoceng"></div>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"type="text/javascript"></script>
    <script type="text/javascript">
      $(function(){
        $(".word .word-nextshaixuan").click(function(){
          $("body").css("height",$(window).height());
          $(".shaixuan").hide();
          $(".zhezhaoceng").hide();
          $(".shaixuan").show();
          $(".zhezhaoceng").show();
          $("body").css("overflow","hidden");
        });
        $(".shaixuanYes").click(function(){
          $(".shaixuan").hide();
          $(".zhezhaoceng").hide();
        });
        $(".shaixuan .shaixuanlineblock1 li").click(function(){
          $(".shaixuan .shaixuanlineblock1 li").removeClass("on");
          $(this).addClass("on");
        });
        $(".shaixuan .shaixuanlineblock2 li").click(function(){
          $(".shaixuan .shaixuanlineblock2 li").removeClass("on");
          $(this).addClass("on");
        });
        $(".shaixuan .shaixuanlineblock3 li").click(function(){
          $(".shaixuan .shaixuanlineblock3 li").removeClass("on");
          $(this).addClass("on");
        });
        $(".shaixuanNo").click(function(){
            $(".shaixuan .shaixuanlineblock li").removeClass("on");
        })

      })
    </script>
	<script>
	$(function() {
		var object = {{search_object | safe}};
		var change_url = function(){
			var arr = [];
			var url = "/search?";
			if (object.sort) {
				arr.push("sort=" + object.sort);
			}
			if (object.q) {
				arr.push("q=" + object.q);
			}
			return url+arr.join("&");
		};
		$(".price").click(function(){
			if (object.sort == "price_desc") {
				object.sort = "price_asc";
			} else {
				object.sort = "price_desc";
			}
			location.href = change_url();
		});
		$(".headersearch").click(function(){
			location.href = "/search_area";
		});
		// $(".headersearch").keypress(function(e){
		// 	var key = e.which;
		// 	if (key == 13) {
		// 		var q = encodeURI($(this).val());
		// 		object.q = q;
		// 		location.href = change_url();
		// 	}
		// });
		//滚动显示
		$(".headersearch").val(object.q);
		var docTop = $(document).scrollTop();
		var height = $(window).height();
		$(window).scroll(function () {
			docTop = $(document).scrollTop();
			img_show();
		});

		var img_show = function(){
			$(".infor-left .loading").each(function(index) {
				var imgHeight = $(this).offset().top;
				if(height + docTop > imgHeight-100){
					var img = $(this).data("src");
					$(this).attr("src",img);
					$(this).removeClass("loading");
				}else {
					return false;
				}
			});
		};

		img_show();
	});
	</script>
  </body>
</html>
