<!DOCTYPE html><html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <title>商品展示</title>
	<script src="js/react.min.js"></script>
    <script src="js/react-dom.min.js"></script>
    <script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
	<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<style>
 @media screen and (max-width:640px){
  *{
      padding: 0;
      margin: 0;
    }
    html,body{
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;


    }
    a{
      text-decoration: none;
    }
    /*隐藏滚动条*/
    ::-webkit-scrollbar {
        display: none;
    }

 /*----  t  o   p-----*/
    .warp{
      position: relative;
      height: 100%;
      width: 100%;
    }
    .header{
      text-align: center;
      position: absolute;
      top:0;
      left: 0;
      right: 0;
      line-height: 54px;
      background: #eaeaea;
    }
    .header-img{
      width: 34px;
      height: 34px;
      vertical-align: middle;
      margin-left: 10px;
    }
    .header-search{
      width: 76%;;
      /*line-height: 20px;*/
      font-size: 14px;
      color: #8B8B83;
      font-weight: 300;
      text-indent: 10px;
      height:35px;
      padding: 10px  5px 10px 0;
      vertical-align: middle;
      border-radius: 4px;
      margin-right: 10px;
      border: 2px solid #ebe8eb;
      outline: none;
      -webkit-appearance : none ;
    }


    /*-------m   a    i     n---------*/
    .main{
      border-top: 1px solid #919191;
      position: absolute;
      top: 55px;
      left: 0;
      right: 0;
      bottom: 0;
      margin-bottom: 34px;
    }
    .main-ul{
      position: absolute;
      top: 0;
      left: 0;
      right: 77%;
      bottom: 0;
      background: #eaeaea;
    }
    .main-ul li{
      height: 45px;
      line-height:45px;
      background: #eaeaea;
      text-indent: 8px;
      font-size: 12px;
      color: #888888;

    }
    .main-ul li.active{
      background: #fff;
    }


    .main-img{
      width: 96%;
      height: 103px;
      background: #f4f4f4;
      margin-bottom: 16px;
    }
    .main-right{
      position: absolute;
      top: 0;
      left: 25%;
      right: 0;
      bottom: 0;
      overflow: auto;

    }
    .main-img img{
      width: 100%;
      height: 103px;
    }

    .main-product{
      width: 100%

    }
    .product-title{
      width: 98%;
      height: 35px;
      border: 1px solid #8f8f8f;
      line-height: 35px;
      text-indent: 4px;
      color:#8f8f8f;
      margin: 10px 0;

    }
    .main-product-title-1{
        border-left: 3px solid #fbbc00;

    }
    .main-product-title-2{
      border-left: 3px solid red;

    }
    .main-product-title-3{
      border-left: 3px solid green;

    }
    .right-triangle{
      float: right;
      margin-right: 5px;
      color: #000;

    }

    .main-product-ul{
      width: 100%;
      list-style: none;
      margin-bottom: 5px;
      overflow: hidden;

    }
    .main-product-ul li{
      width: 33.3%;
      height: 80px;
      /*background: #eee;*/
      float: left;
      padding: 2px;
      box-sizing: border-box;
      margin: 5px 0;
    }
    /*.main-product-ul:last-child li{
      height: 17px;
    }*/
    .main-product-ul li img{
      height: 80px;
    }
    .main-product-ul li img{
      display: block;
      width: 60px;
      height: 60px;
      background: #fff;
      margin: 0 auto;
    }
    .main-product-ul li p{
      margin: 0;
      text-align: center;
      font-size: 12px;
      line-height: 20px;
      color: #919191;
    }


 /*----------f  o  o  t  e  r   ------------*/
    .footer{
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #f4f4f4;
      border-top: 1px solid #ABABAB;

    }
    .footer-ul{
      width: 100%;
      margin: 0 auto;
      list-style: none;
      height: 60px;
      /*line-height: 50px;*/
      display: flex;


    }
    .footer-ul li{
      width: 25px;
      height:60px;
      padding-top: 5px;
      float: left;
      margin: 5px 0;
      flex: 1;
      text-align: center;

    }
    .footer-ul li img{
      width: 25px;
      height:25px;
      /*display: inline-block;*/
    }
    .footer-ul li span{
      display: block;
      font-size: 12px;
      line-height: 10px;
      color: #919191;
    }



}
</style>
  </head>
  <body>
  <div id="warp" className="warp"></div>
  <script type="text/babel">
  class Header extends React.Component {
	  render() {
		  return (
			  <div className="header">
		        <input type="search" results="w" placeholder="搜索" className="header-search" id="header-search" />
		        <img src="images/weixin.png" className="header-img" />
		      </div>
		  );
	  }
  };

  //一级分类节点
  class RootSortItem extends React.Component {
	  constructor(props) {
		  super(props);
		  this.handleClick = this.handleClick.bind(this);
	  }

	  handleClick(e) {
		  this.props.itemClick(this.props.item.id);
	  }

	  render() {
		  var c = "";
		  if (this.props.item.id == this.props.selected) {
		  	c = "active";
		  }
		  return (
			  <li className={c} onClick={this.handleClick}>{this.props.item.sort_name}</li>
		  );
	  }
  };
//二级目录
  class LevelTwoItem extends React.Component {
	constructor(props) {
		super(props);
		this.handleClick = this.handleClick.bind(this);
	}

	handleClick(e) {
		this.props.itemClick(this.props.item.id);
	}

	render() {
		var LevelThreeItems = <div></div>;
		if (this.props.sorts[this.props.item.id]) {
			LevelThreeItems = (<div>
				{this.props.sorts[this.props.item.id].map((product,j) => (
				<LevelThreeItem product={product} sorts={this.props.sorts} />
				  ))
			  }
				</div>)
		}
		return (
			<div>
				<div className="product-title main-product-title-1">{this.props.item.sort_name}<span className="right-triangle">></span></div>
				<ul className="main-product-ul">
					{LevelThreeItems}
				</ul>
			</div>
		);
	}
  };
  //三级级目录
    class LevelThreeItem extends React.Component {
	  	constructor(props) {
	  		super(props);
	  		this.handleClick = this.handleClick.bind(this);
	  	}

	  	handleClick(e) {
	  		this.props.itemClick(this.props.item.id);
	  	}

	  	render() {
			var img = "images/" + this.props.product.img_location;
	  		return (
				  <li><a href="#"><img src={img} alt="" /><p>{this.props.product.sort_name}</p></a></li>
	  		);
	  	}
    };

  class Main extends React.Component {
	  constructor(props) {
		  super(props);
		  this.itemClick = this.itemClick.bind(this);
		  this.state = {sorts:{"0":[],"1":[]},selected:1};
	  }
	  loadRootSortsFromServer() {
		  $.ajax({
			  url: this.props.url,
			  dataType: 'json',
			  cache: false,
			  success: function(data) {
				  this.setState({sorts: data.sorts});
			  }.bind(this),
			  error: function(xhr, status, err) {
				  console.error(this.props.url, status, err.toString());
			  }.bind(this)
		  });
	  }
	  componentDidMount() {
		  this.loadRootSortsFromServer();
	  }
	  itemClick(id) {
		  this.setState({selected: id});
	  }
	  render() {
		  var LevelTwoItems = <div></div>;
		  if (this.state.sorts[this.state.selected]) {
			  LevelTwoItems = (<div>{this.state.sorts[this.state.selected].map((item,i) => (
				  <LevelTwoItem item={item} sorts={this.state.sorts} />
					))
				}</div>);
		  }
		  return (
			  <div className="main">
		        <ul className="main-ul">
				{this.state.sorts["0"].map((item,i) => (
					<RootSortItem item={item} selected={this.state.selected} itemClick={this.itemClick} />
					))
				}
		        </ul>

		        <div className="main-right">
		          <div className="main-img">
		            <img src="images/ad_01.jpg" alt="" />
		          </div>

		          <div className="main-product">
				  	  {LevelTwoItems}
		              <ul className="main-product-ul">
		                <li></li>
		                <li></li>
		                <li></li>
		              </ul>
		          </div>
		        </div>

		        <div className="main-bottom"></div>
		      </div>
		  );
	  }
  };

  class Footer extends React.Component {
	  render() {
		  return (
			  <div className="footer">
		        <ul className="footer-ul">
		          <li><a href="#"><img src="images/shouye.png" alt="" /><span>首页</span></a></li>
		          <li><a href="#"><img src="images/fenlei.png" alt="" /><span>分类</span></a></li>
		          <li><a href="#"><img src="images/gouwuc.png" alt="" /><span>购物车</span></a></li>
		          <li><a href="#"><img src="images/shequ.png" alt="" /><span>社区</span></a></li>
		          <li><a href="#"><img src="images/denglu.png" alt="" /><span>我的</span></a></li>
		        </ul>
		      </div>
		  );
	  }
  };

  ReactDOM.render(
	  <div>
		  <Header />
		  <Main url="http://127.0.0.1:8040/search_sorts" />
		  <Footer />
	  </div>,
	  document.getElementById('warp')
  );
  </script>

  </body>
</html>
